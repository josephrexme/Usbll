{"version":3,"sources":["main.js"],"names":["axios","done","Promise","resolve","value","then","_next","_throw","device","fn","self","this","args","arguments","reject","gen","apply","source","document","contentLoop","getElementById","ratingEntries","template","Handlebars","err","undefined","call","require","window","Buffer","process","global","__argument0","__argument1","__argument2","__argument3","__filename","__dirname","feedback","obj","default","items","myItems","3","map","module","exports","item","getDevice","viewport","event","searchInput","inputValue","Function","hadRuntime","g","context","filteredItems","innerHTML","searchForm","addEventListener","element","classList","regeneratorRuntime","e","includes","toString","./runtime","buffer","rH1JPG","4","html","Op","Object","prototype","hasOwn","hasOwnProperty","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","inModule","runtime"],"mappings":"mgBAAA,iBAGMA,EAAKC,UAGFC,QAAAC,QAAAC,GAAAC,KAAAC,EAAAC,GAgBGC,EAAAA,QAhBH,SAAAC,GAAG,OAAA,WAAA,IAAAC,EAAAC,KAAAC,EAAAC,UAAA,OAAA,IAAAX,QAAA,SAAAC,EAAAW,GAAA,IAAAC,EAAAN,EAAAO,MAAAN,EAAAE,GAGFK,SAAAA,EAASC,GACTC,EAAcD,EAAAA,EAASE,EAATd,EAAwBC,EAAxB,OAJZH,GAOFiB,SAAAA,EAAAA,GAEAC,EAAWC,EAAAA,EAAAT,EATTR,EAAAC,EAAA,QAAAiB,GAYJlB,OAAAmB,SAKCC,KAAAf,KAAAgB,EAAA,UAAA,oBAAAjB,KAAAA,KAAA,oBAAAkB,OAAAA,OAAA,GAAAD,EAAA,UAAAE,OAAAhB,UAAA,GAAAA,UAAA,GAAAA,UAAA,GAAAA,UAAA,GAAA,iEAAA,wFACD,SAAAiB,EAAAC,EAAOvB,EAAPwB,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,GAGEC,EAAAA,QAFL,SAnBOC,6BAAAC,QAAAD,MAuBQE,KAAAA,KAAAA,EAAYH,UAvBpB,oBAuBQG,KAvBR/B,KAAA,oBAAAkB,OAAAA,OAAA,GAAAD,EAAA,UAAAE,OAAAhB,UAAA,GAAAA,UAAA,GAAAA,UAAA,GAAAA,UAAA,GAAA,sEAAA,+CAwBF6B,CAAAA,OAAAA,EAAAA,OAAUD,IAAKE,EAACC,CAAAA,SAAIjB,EAAIkB,EAAIC,IAC9BC,SAAAA,EAAKvC,EAALqB,EAAcmB,EAAeC,EAANf,EAAvBC,EAAAC,EAAAC,GAUAa,IAAAA,EAAAA,WACA,OAAAvC,MAAmBwC,iBAAbC,MAAyBhD,KAD/B8C,IAGAG,SAAA,cAAAA,GAKAC,EAAAC,EAAMC,oBACKC,GAAPhB,OAAAA,oBAAOgB,GAAAA,QAAAA,sBAGXtC,EAAAA,GAAYuC,EAAAA,mBAQR,GALRC,EAAAA,wBAAWC,EAGXvC,EAAAA,QAAAA,EAAa,aAELiC,EAGAO,EAAAA,mBAAQC,OAIJ,WACHP,EAAAQ,mBAAa,MAAAC,GAAAT,EAAAQ,wBAFdtC,KAMQC,KAAAf,KAAAgB,EAAA,UAA2B,oBAAbsC,KAAqBC,KAAnC,oBAAAtC,OAAAA,OAAA,GAAAD,EAAA,UAAAE,OAAAhB,UAAA,GAAAA,UAAA,GAAAA,UAAA,GAAAA,UAAA,GAAA,wFAAA,wEACH,CAAAsD,YAAA,EAAAC,OAFD,EAAAC,OAAA,IAAAC,EAAA,CAAA,SAAA3C,EAAAkB,EAAAC,IAGAU,SAAAA,EAAAA,EAAO3B,EAAGG,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,gBASdkC,aAEH,MAAAC,EAAAC,OA1BDC,UA2BHC,EAjFOH,EAkFRI,eAlFQC,EAAA,mBAAAC,OAAAA,OAAA,GAAAC,EAAAF,EAAAG,UAAA,aAAAC,EAAAJ,EAAAK,eAAA,kBAAAC,EAAAN,EAAAO,aAAA,gBAAAC,EAAA,iBAAAxC,EAAHyC,EAAAvD,EAAAgC,wBAAAsB,IAATxC,EAAAC,QAAAwC","file":"../app.js","sourcesContent":["// import Handlebars from 'handlebars';\n// import axios from 'axios';\nconst Handlebars = {};\nconst axios = {};\n\n\nconst app = async function (){\n    let html;\n    const url = 'https://static.usabilla.com/recruitment/apidemo.json';\n    const source = document.getElementById('row-template').innerHTML;\n    const contentLoop = document.getElementById('content-loop');\n    const searchForm = document.getElementById('searchForm');\n    const searchInput = document.getElementById('searchInput');\n    const ratingEntries = document.querySelectorAll('[id^=\"rating\"]');\n\n    const template = Handlebars.compile(source);\n\n    const getDevice = resolution => {\n        let device = 'Mobile';\n        if(resolution >= 1024) {\n            device = 'Desktop'\n        } else if(resolution >= 720) {\n            device = 'Tablet'\n        }\n        return device;\n    };\n\n    const feedback = await axios.get(url);\n\n    const { data: { items } } = feedback;\n    const myItems = items.map(item => {\n        item.device = getDevice(item.viewport.width);\n        return item;\n    })\n    const context = {\n        items: myItems\n    };\n    html = template(context);\n    contentLoop.innerHTML = html;\n\n    const searchFn = event => {\n        event.preventDefault();\n        const inputValue = searchInput.value;\n\n        const regEx = new RegExp(inputValue, 'i');\n\n        const filteredItems = myItems.filter(item => {\n            return regEx.test(item.comment)\n        })\n        const context = {\n            items: filteredItems\n        };\n        html = template(context);\n        contentLoop.innerHTML = html;\n    }\n\n    searchForm.addEventListener('submit', searchFn);\n    searchInput.addEventListener('input', searchFn);\n\n    ratingEntries.forEach(entry => {\n        entry.addEventListener('click', event => {\n            let context;\n            const element = event.target;\n\n            element.classList.toggle('selected');\n            const selectedElements = document.querySelectorAll('.selected');\n\n            const picked = Array.from(selectedElements).filter(element => {\n                return element.classList.contains('selected');\n            }).map(element => element.textContent);\n\n            if(element.classList.contains('selected')) {\n                const filteredItems = myItems.filter(item => {\n                    return picked.includes(item.rating.toString());\n                })\n                context = {\n                    items: filteredItems\n                };\n            } else {\n                context = {\n                    items: myItems\n                }\n            }\n\n            html = template(context);\n            contentLoop.innerHTML = html;\n        })\n    })\n    // module.exports = { template };\n};\n\napp();\n\n\n"]}