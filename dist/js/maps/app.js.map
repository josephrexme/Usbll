{"version":3,"sources":["main.js"],"names":["url","fn","resolution","device","arguments","resolve","reject","gen","apply","self","args","asyncGeneratorStep","_next","_throw","value","err","undefined","source","document","getElementById","innerHTML","window","require","Buffer","contentLoop","module","exports","searchForm","__argument2","__argument3","__filename","__dirname","searchInput","obj","ratingEntries","querySelectorAll","template","feedback","items","rH1JPG","data","myItems","global","map","__argument0","__argument1","searchFn","event","preventDefault","Function","inputValue","hadRuntime","g","regeneratorRuntime","Object","getOwnPropertyNames","indexOf","html","context","entry","addEventListener","oldRuntime","e","element","call","this","filteredItems","filter","item","./runtime","buffer","picked","includes","rating","toString","process","hasOwn","Op","hasOwnProperty","iteratorSymbol","$Symbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","inModule","runtime"],"mappings":"6jBAeUA,EAAAA,QAXN,SAAAC,qBACA,IAAGC,EAAAA,KACCC,EAASC,UADb,OAEO,IAAGF,QAAU,SAASG,EAAAC,GACzBH,IAAMI,EAAGN,EAAAO,MAATC,EAAAC,iBAEJC,EAAAJ,EAAAF,EAAAC,EAAAM,EAAAC,EAAA,OAAAC,iBAGHH,EAAAJ,EAAAF,EAAAC,EAAAM,EAAAC,EAAA,QAAAE,GAAAH,OAAAI,SAGSC,KAAAA,KAAAA,EAASC,UAAwB,oBAAfC,KAA+BC,KAH1D,oBAAAC,OAAAA,OAAA,GAAAC,EAAA,UAAAC,OAAAnB,UAAA,GAAAA,UAAA,GAAAA,UAAA,GAAAA,UAAA,GAAA,iEAAA,+CAISoB,CAAAA,OAAAA,GAAAA,OAAcN,KAAAA,EAAAA,CAAQ,SAACC,EAAeM,EAAAC,IACtCC,SAAAA,EAAAA,EAAaT,EAASC,EAAAA,EAAeS,EAL9CC,EAAAC,EAAAC,GAAAN,EAAAC,QAMSM,SAAsBC,GACtBC,OAAAA,GAAAA,EAAAA,WAAgBhB,EAASiB,CAEzBC,QAAAA,MAGAC,KAAAA,KAAAA,EAZT,UAAA,oBAAA5B,KAAAA,KAAA,oBAAAY,OAAAA,OAAA,GAAAC,EAAA,UAAAC,OAAAnB,UAAA,GAAAA,UAAA,GAAAA,UAAA,GAAAA,UAAA,GAAA,sEAAA,+CAcmBkC,CAAAA,OAAAA,GAdnBC,OAc+BF,KAApBG,EAdX,CAcmBF,SAdnBhB,EAAAG,EAAAC,IAeSe,SAAAA,EAfTC,EAeyBC,EAAIC,EAAIC,EAAIjB,EAAAC,EAAAC,EAAAC,GAU5Be,IAAAA,EAAAA,WACFC,OAAAA,MAAA,iBAAMC,MAANvC,KADEqC,IAEFG,SAAMC,cAAND,GAMCE,EAFDC,EAAAC,oBAGgB,GAAhBC,OAAAC,oBAAgBH,GAAAI,QAAA,sBAGhBC,EAAIN,GAAYO,EAAAA,mBAQhBC,+BAHJ3B,EAAAA,QAAAA,EAAY4B,aAGRD,EAEIP,EAAAC,mBAAaQ,OAKb,WACIT,EAAAC,mBACH,MAAAS,GAAaV,EAAAC,wBAAIU,KAGdC,KAAAC,KAAA3C,EAAM4C,UAAwBC,oBAAR1B,KAAe2B,KAAQ,oBAAA/C,OAAAA,OAAA,GAAAC,EAAA,UAAAC,OAAAnB,UAAA,GAAAA,UAAA,GAAAA,UAAA,GAAAA,UAAA,GAAA,wFAAA,wEACzC,CAAAiE,YAAA,EAAAC,OAAOC,GAAAA,OAAOC,KAASJ,EAAI,CAACK,SAAOC,EAA5BjD,EAAPC,IACH,SAAAiD,EAFDjC,EAAAnB,EAAAqB,EAAAC,EAAAjB,EAAAC,EAAAC,EAAAC,IAUH,SAAAW,gBAGDlB,IAEPR,EAFOQ,EAAAA,OAAAA,UACHoD,EA1BDC,EAAAC,qDA7CPC,EAAAC,EAAAC,UAAA,aAAAC,EAAAF,EAAAG,eAAA,kBAAAC,EAAAJ,EAAAK,aAAA,gBAAAC,EAAA,iBAAA7D,EAAA8D,EAAA7C,EAAAW,mBAAA,GAADkC,uBAAC,uyLAmEY","file":"../app.js","sourcesContent":["import Handlebars from 'handlebars';\nimport axios from 'axios';\n\nexport const getDevice = resolution => {\n    let device = 'Mobile';\n    if(resolution >= 1024) {\n        device = 'Desktop'\n    } else if(resolution >= 720) {\n        device = 'Tablet'\n    }\n    return device;\n};\n\n(async function (){\n    let html;\n    const url = 'https://static.usabilla.com/recruitment/apidemo.json';\n    const source = document.getElementById('row-template').innerHTML;\n    const contentLoop = document.getElementById('content-loop');\n    const searchForm = document.getElementById('searchForm');\n    const searchInput = document.getElementById('searchInput');\n    const ratingEntries = document.querySelectorAll('[id^=\"rating\"]');\n\n    const template = Handlebars.compile(source);\n    \n    \n    const feedback = await axios.get(url);\n\n    const { data: { items } } = feedback;\n    const myItems = items.map(item => {\n        item.device = getDevice(item.viewport.width);\n        return item;\n    })\n    const context = {\n        items: myItems\n    };\n    html = template(context);\n    contentLoop.innerHTML = html;\n\n    const searchFn = event => {\n        event.preventDefault();\n        const inputValue = searchInput.value;\n\n        const regEx = new RegExp(inputValue, 'i');\n\n        const filteredItems = myItems.filter(item => {\n            return regEx.test(item.comment)\n        })\n        const context = {\n            items: filteredItems\n        };\n        html = template(context);\n        contentLoop.innerHTML = html;\n    }\n\n    searchForm.addEventListener('submit', searchFn);\n    searchInput.addEventListener('input', searchFn);\n\n    ratingEntries.forEach(entry => {\n        entry.addEventListener('click', event => {\n            let context;\n            const element = event.target;\n            \n            element.classList.toggle('selected');\n            const selectedElements = document.querySelectorAll('.selected');\n\n            const picked = Array.from(selectedElements).filter(element => {\n                return element.classList.contains('selected');\n            }).map(element => element.textContent);\n\n            if(element.classList.contains('selected')) {\n                const filteredItems = myItems.filter(item => {\n                    return picked.includes(item.rating.toString());\n                })\n                context = {\n                    items: filteredItems\n                };\n            } else {\n                context = {\n                    items: myItems\n                }\n            }\n            \n            html = template(context);\n            contentLoop.innerHTML = html;\n        })\n    })\n    // module.exports = { template };\n}());\n\n\n"]}